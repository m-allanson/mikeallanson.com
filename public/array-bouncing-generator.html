<!DOCTYPE html>
<script>
window.componentPath = "/array-bouncing-generator.js";
window.wrapperComponentPath = "/src/page-wrapper.js";
window.dataPath = "/array-bouncing-generator.json";
</script>
<html lang="en">
  <head>
  <title data-react-helmet="true">Array Bouncing Generator ðŸª² mikeallanson.com</title>
  <meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="description" content="TODO!! Here is my lovely placeholder description"/>
  <link data-react-helmet="true" type="font/woff2" href="fonts/ibm-plex-serif-v9-latin-700.woff2" rel="preload" as="font" crossorigin="anonymous"/><link data-react-helmet="true" rel="stylesheet" href="/styles.css"/><link data-react-helmet="true" rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸª²&lt;/text&gt;&lt;/svg&gt;"/><link data-react-helmet="true" rel="alternate icon" href="/favicon.ico"/>
  
  
  </head>
  <body >
    <div id="toast-page-section"><header role="banner"><a href="/" aria-label="Mike Allanson">Mike Allanson</a></header><main><article is="post" class="flow"><h1 id="array-bouncing-generator" is="postHeading">Array Bouncing Generator</h1><p>I want to cycle through the values in an array. When I get to the end, I want to cycle <em>back</em> through the values in reverse. I want to do this an unknown number of times.</p><p>Given an array like <code>[1, 2, 3, 4]</code>, give me the values <code>1, 2, 3, 4, 3, 2, 1, 2, 3, 4, 3, 2</code> (etc).</p><p>You can do this with a generator function:</p><div is="code" codestring="function* bounce(values) {\n  let step = -1;\n  let size = values.length;\n  let current = 0;\n\n  while (true) {\n    if (size &lt; 2) {\n      yield values[0];\n    } else {\n      yield values[current];\n      // reverse direction at array boundary\n      if (current === size - 1 || current === 0) step *= -1;\n      current += step;\n    }\n  }\n}" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token keyword">function</span><span style="color: rgb(127, 219, 202);" class="token operator">*</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function">bounce</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token parameter">values</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">let</span><span class="token plain"> step </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">-</span><span style="color: rgb(247, 140, 108);" class="token number">1</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">let</span><span class="token plain"> size </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> values</span><span style="color: rgb(199, 146, 234);" class="token punctuation">.</span><span class="token property-access">length</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">let</span><span class="token plain"> current </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">0</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">while</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(255, 88, 116);" class="token boolean">true</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">if</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token plain">size </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">2</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">yield</span><span class="token plain"> values</span><span style="color: rgb(199, 146, 234);" class="token punctuation">[</span><span style="color: rgb(247, 140, 108);" class="token number">0</span><span style="color: rgb(199, 146, 234);" class="token punctuation">]</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">else</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">yield</span><span class="token plain"> values</span><span style="color: rgb(199, 146, 234);" class="token punctuation">[</span><span class="token plain">current</span><span style="color: rgb(199, 146, 234);" class="token punctuation">]</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(99, 119, 119); font-style: italic;" class="token comment">// reverse direction at array boundary</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">if</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token plain">current </span><span style="color: rgb(127, 219, 202);" class="token operator">===</span><span class="token plain"> size </span><span style="color: rgb(127, 219, 202);" class="token operator">-</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">1</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">||</span><span class="token plain"> current </span><span style="color: rgb(127, 219, 202);" class="token operator">===</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">0</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> step </span><span style="color: rgb(127, 219, 202);" class="token operator">*=</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">-</span><span style="color: rgb(247, 140, 108);" class="token number">1</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      current </span><span style="color: rgb(127, 219, 202);" class="token operator">+=</span><span class="token plain"> step</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span></div></pre></div><p>Usage:</p><div is="code" codestring="const myValues = [1, 2, 3, 4, 5];\n\nconst valueIterator = bounce(myValues);\n\nlet result = \&quot;\&quot;;\n\n// Bounce through the array until we have 20 values\nfor (let i = 0; i &lt; 20; i++) {\n  result += valueIterator.next().value;\n}\n\n// Logs \&quot;12345432123454321234\&quot;\nconsole.log(result);" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> myValues </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">[</span><span style="color: rgb(247, 140, 108);" class="token number">1</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">2</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">3</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">4</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">5</span><span style="color: rgb(199, 146, 234);" class="token punctuation">]</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> valueIterator </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function">bounce</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token plain">myValues</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword">let</span><span class="token plain"> result </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(99, 119, 119); font-style: italic;" class="token comment">// Bounce through the array until we have 20 values</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">for</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(127, 219, 202);" class="token keyword">let</span><span class="token plain"> i </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">0</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"> i </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain"> </span><span style="color: rgb(247, 140, 108);" class="token number">20</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"> i</span><span style="color: rgb(127, 219, 202);" class="token operator">++</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  result </span><span style="color: rgb(127, 219, 202);" class="token operator">+=</span><span class="token plain"> valueIterator</span><span style="color: rgb(199, 146, 234);" class="token punctuation">.</span><span style="color: rgb(130, 170, 255);" class="token method function property-access">next</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">.</span><span class="token property-access">value</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(99, 119, 119); font-style: italic;" class="token comment">// Logs &quot;12345432123454321234&quot;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(255, 203, 139);" class="token console class-name">console</span><span style="color: rgb(199, 146, 234);" class="token punctuation">.</span><span style="color: rgb(130, 170, 255);" class="token method function property-access">log</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token plain">result</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span></div></pre></div></article></main><footer is="mainFooter"><a href="https://github.com/m-allanson/mikeallanson.com">Source available on GitHub</a></footer></div>
    <script type="module">
    /* @jsx jsx */

async function renderPage() {
  const promises = [
    import(window.componentPath),
    window.wrapperComponentPath
      ? import(window.wrapperComponentPath)
      : undefined,
    window.dataPath
      ? fetch(window.dataPath).then(response => {
          return response.json();
        })
      : {},
    import("/web_modules/preact.js")
  ];

  let pageWrapper = ({ children }) => h("div", null, children);
  const [
    PageModule,
    PageWrapperModule,
    pageData,
    { render, h }
  ] = await Promise.all(promises);
  const Page = PageModule.default;
  if(PageWrapperModule) {
    pageWrapper = PageWrapperModule.default
  }

  render(
    h(pageWrapper, pageData, h(Page, pageData)),
    document.getElementById("toast-page-section")
  );
}

renderPage();

</script>
  </body>
</html>
