<!DOCTYPE html>
<script>
window.componentPath = "/intro-to-toast.js";
window.wrapperComponentPath = "/src/page-wrapper.js";
window.dataPath = "/intro-to-toast.json";
</script>
<html lang="en">
  <head>
  <title data-react-helmet="true">Intro to Toast ðŸª² mikeallanson.com</title>
  <meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="description" content="TODO!! Here is my lovely placeholder description"/>
  <link data-react-helmet="true" type="font/woff2" href="fonts/ibm-plex-serif-v9-latin-700.woff2" rel="preload" as="font" crossorigin="anonymous"/><link data-react-helmet="true" rel="stylesheet" href="/styles.css"/><link data-react-helmet="true" rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸª²&lt;/text&gt;&lt;/svg&gt;"/><link data-react-helmet="true" rel="alternate icon" href="/favicon.ico"/>
  
  
  </head>
  <body >
    <div id="toast-page-section"><header role="banner"><a href="/" aria-label="Mike Allanson">Mike Allanson</a></header><main><article is="post" class="flow"><h1 id="intro-to-toast" is="postHeading">Intro to Toast</h1><p>Toast is &quot;an ES Modules based Jamstack framework&quot;. See <a href="https://www.toast.dev/">toast.dev for more info</a>.</p><h2 id="getting-started" is="postHeading"><a href="#getting-started">Getting started</a></h2><p>Run <code>npx create-toast minimal</code> to create a barebones Toast site. Or <code>npx create-toast</code> to create a default starter that has Tailwind and MDX configured.</p><p>You can view <a href="https://github.com/toastdotdev/starters">the official starters in this repo</a>.</p><h3 id="add-a-static-page" is="postHeading"><a href="#add-a-static-page">Add a static page</a></h3><p>By default Toast will check the <code>/src/pages/</code> directory, turning each <code>.js</code> file into an html page at build time. Your <code>.js</code> file should export a Preact component.</p><p>The minimal starter gives you a <code>/src/pages/index.js</code> file, which builds to <code>/public/index.html</code>.</p><h3 id="provide-data-to-pages" is="postHeading"><a href="#provide-data-to-pages">Provide data to pages</a></h3><p>The <code>/src/pages/</code> directory is great for static pages. What about adding external data to your pages?</p><p>You can use a <code>toast.js</code> file in the root of your project to hook into Toast's page creation process.</p><p>A minimal <code>toast.js</code> file can look like this:</p><div is="code" codestring="export const sourceData = async ({ setDataForSlug }) =&gt; {\n  const componentSrc = `\nimport { h } from \&quot;preact\&quot;;\nexport default props =&gt; &lt;div&gt;\n  &lt;h1&gt;Hello, world&lt;/h1&gt;\n&lt;/div&gt;\n`;\n\n  const pageArgs = {\n    component: {\n      mode: \&quot;source\&quot;,\n      value: componentSrc,\n    },\n  };\n\n  await setDataForSlug(\&quot;/my-page\&quot;, pageArgs);\n\n  return;\n};" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token keyword module">export</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function-variable function">sourceData</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">async</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(199, 146, 234);" class="token parameter punctuation">{</span><span class="token parameter"> setDataForSlug </span><span style="color: rgb(199, 146, 234);" class="token parameter punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token arrow operator">=&gt;</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> componentSrc </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token template-string template-punctuation string">`</span><span style="color: rgb(173, 219, 103);" class="token template-string string"></span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">import { h } from &quot;preact&quot;;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">export default props =&gt; &lt;div&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">  &lt;h1&gt;Hello, world&lt;/h1&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">&lt;/div&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string"></span><span style="color: rgb(173, 219, 103);" class="token template-string template-punctuation string">`</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> pageArgs </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    component</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      mode</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;source&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      value</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> componentSrc</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">await</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function">setDataForSlug</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;/my-page&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> pageArgs</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">return</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span></div></pre></div><p>The key parts here are:</p><ul><li>exporting a <code>sourceData</code> function</li><li>calling the <code>setDataForSlug</code> function</li></ul><p>When Toast builds your site, it checks to see if your <code>toast.js</code> file exports a <code>sourceData</code> function. If yes, Toast will run your <code>sourceData()</code>, passing in Toast's <code>setDataForSlug</code> function. <a href="https://github.com/toastdotdev/toast/blob/5ba6eb1bc0b3e8ea4e84394eca407b71fd13a6c2/toast-node-wrapper/toast-source-data.mjs#L9-L12">You can check the Toast source to see how this is done</a>.</p><p>You're free to source your data however you like. When your data is ready, use <code>setDataForSlug</code> to provide the data for each slug (aka page).</p><h4 id="setdataforslug" is="postHeading"><a href="#setdataforslug">setDataForSlug</a></h4><p><code>setDataForSlug</code> is used to create pages and provide them with data.</p><p><code>setDataForSlug</code> requires <code>slug</code> and <code>pageArgs</code> parameters. <code>slug</code> sets the URL path for your created page. <code>pageArgs</code> defines how to render the page.</p><p><code>pageArgs</code> is an object with two top level keys:</p><div is="code" codestring="{\n  component: {},\n  data: {}\n}" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  component</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  data</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span></div></pre></div><ul><li><code>component</code> describes the component that will be used to render the page</li><li><code>data</code> provides any data that's needed to render the page</li></ul><blockquote class="flow"><p>Note: <code>pageArgs</code> can have other keys, you can <a href="https://github.com/toastdotdev/toast/issues/29">read more about <code>pageArgs</code> in the Toast repo</a>.</p></blockquote><p>Calling <code>setDataForSlug</code> multiple times for the same <code>slug</code> will cause Toast to merge the <code>pageArgs</code> from every call.</p><p>Toast uses the same <code>setDataForSlug</code> API when creating pages from files in your <code>/src/pages/</code> directory.</p><p>The above two points mean that you can push data into your filesystem components. For example:</p><div is="code" codestring="// /src/pages/index.js\nimport { h } from \&quot;preact\&quot;;\n\nexport default (props) =&gt; {\n  return (\n    &lt;div&gt;\n      &lt;h1&gt;The Smallest Toast Example&lt;/h1&gt;\n      &lt;p&gt;This page built at {props.buildTime}&lt;/p&gt;\n    &lt;/div&gt;\n  );\n};" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(99, 119, 119); font-style: italic;" class="token comment">// /src/pages/index.js</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword module">import</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">{</span><span class="token imports"> h </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">}</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword module">from</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;preact&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword module">export</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword module">default</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token parameter">props</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token arrow operator">=&gt;</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">return</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">div</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">h1</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token maybe-class-name">The</span><span class="token plain"> </span><span class="token maybe-class-name">Smallest</span><span class="token plain"> </span><span class="token maybe-class-name">Toast</span><span class="token plain"> </span><span class="token maybe-class-name">Example</span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token plain">h1</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">p</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token maybe-class-name">This</span><span class="token plain"> page built at </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain">props</span><span style="color: rgb(199, 146, 234);" class="token punctuation">.</span><span class="token property-access">buildTime</span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token plain">p</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token plain">div</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span></div></pre></div><div is="code" codestring="// toast.js\nexport const sourceData = async ({ setDataForSlug }) =&gt; {\n  await setDataForSlug(\&quot;/\&quot;, {\n    data: {\n      buildTime: new Date(),\n    },\n  });\n};" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(99, 119, 119); font-style: italic;" class="token comment">// toast.js</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword module">export</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function-variable function">sourceData</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">async</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(199, 146, 234);" class="token parameter punctuation">{</span><span class="token parameter"> setDataForSlug </span><span style="color: rgb(199, 146, 234);" class="token parameter punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token arrow operator">=&gt;</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">await</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function">setDataForSlug</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;/&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    data</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      buildTime</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">new</span><span class="token plain"> </span><span style="color: rgb(255, 203, 139);" class="token class-name">Date</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span></div></pre></div><p>This will create a page at <code>/my-page</code> that displays the time that the page was built.</p><p>Here's the same example, except passing the component in to <code>setDataForSlug</code>:</p><div is="code" codestring="export const sourceData = async ({ setDataForSlug }) =&gt; {\n  const componentSrc = `\nimport { h } from \&quot;preact\&quot;;\nexport default props =&gt; &lt;div&gt;\n  &lt;h1&gt;Hello, world. {props.builtAt}&lt;/h1&gt;\n&lt;/div&gt;\n`;\n\n  const pageArgs = {\n    component: {\n      mode: \&quot;source\&quot;,\n      value: componentSrc,\n    },\n    data: {\n      builtAt: new Date(),\n    },\n  };\n\n  await setDataForSlug(\&quot;/my-page\&quot;, pageArgs);\n\n  return;\n};" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token keyword module">export</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function-variable function">sourceData</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">async</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(199, 146, 234);" class="token parameter punctuation">{</span><span class="token parameter"> setDataForSlug </span><span style="color: rgb(199, 146, 234);" class="token parameter punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token arrow operator">=&gt;</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> componentSrc </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token template-string template-punctuation string">`</span><span style="color: rgb(173, 219, 103);" class="token template-string string"></span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">import { h } from &quot;preact&quot;;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">export default props =&gt; &lt;div&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">  &lt;h1&gt;Hello, world. {props.builtAt}&lt;/h1&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">&lt;/div&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string"></span><span style="color: rgb(173, 219, 103);" class="token template-string template-punctuation string">`</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> pageArgs </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    component</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      mode</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;source&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      value</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> componentSrc</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    data</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      builtAt</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">new</span><span class="token plain"> </span><span style="color: rgb(255, 203, 139);" class="token class-name">Date</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">await</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function">setDataForSlug</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;/my-page&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> pageArgs</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">return</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span></div></pre></div><h4 id="wrap-pages" is="postHeading"><a href="#wrap-pages">Wrap pages</a></h4><p>Create a component at <code>/src/page-wrapper.js</code> and Toast will use it to wrap all of your pages. The <a href="https://github.com/toastdotdev/starters/blob/a35cf2bd4cbe25514e39708c2c9953ccd4a801be/default/src/page-wrapper.js">default starter</a> uses the page wrapper to:</p><ul><li>add a <a href="https://reactjs.org/docs/context.html#contextprovider">Context provider</a> for MDX</li><li>add a <code>&lt;link&gt;</code> tag to the page <code>&lt;head&gt;</code> (via <a href="https://github.com/nfl/react-helmet">React Helmet</a>):</li></ul><div is="code" codestring="import { h } from \&quot;preact\&quot;;\nimport { Helmet } from \&quot;react-helmet\&quot;;\nimport { MDXProvider } from \&quot;@mdx-js/preact\&quot;;\n\nconst components = {\n  codeblock: (props) =&gt; &lt;div class=\&quot;bg-gray-900\&quot; {...props} /&gt;,\n};\n\nexport default function PageWrapper(props) {\n  return (\n    &lt;MDXProvider components={components}&gt;\n      &lt;div&gt;\n        &lt;Helmet&gt;\n          &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;/styles.css\&quot; /&gt;\n        &lt;/Helmet&gt;\n        {props.children}\n      &lt;/div&gt;\n    &lt;/MDXProvider&gt;\n  );\n}" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token keyword module">import</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">{</span><span class="token imports"> h </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">}</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword module">from</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;preact&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword module">import</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Helmet</span><span class="token imports"> </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">}</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword module">from</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;react-helmet&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword module">import</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">MDXProvider</span><span class="token imports"> </span><span style="color: rgb(199, 146, 234);" class="token imports punctuation">}</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword module">from</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;@mdx-js/preact&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword">const</span><span class="token plain"> components </span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(130, 170, 255);" class="token function-variable function">codeblock</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token parameter">props</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token arrow operator">=&gt;</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">div </span><span style="color: rgb(127, 219, 202);" class="token keyword">class</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;bg-gray-900&quot;</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span style="color: rgb(127, 219, 202);" class="token spread operator">...</span><span class="token plain">props</span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span style="display: inline-block;" class="token plain">
</span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword module">export</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword module">default</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token keyword">function</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function maybe-class-name">PageWrapper</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token parameter">props</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">return</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token maybe-class-name">MDXProvider</span><span class="token plain"> components</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain">components</span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">div</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">        </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token maybe-class-name">Helmet</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">          </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">link rel</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;stylesheet&quot;</span><span class="token plain"> href</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;/styles.css&quot;</span><span class="token plain"> </span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">        </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token maybe-class-name">Helmet</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">        </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain">props</span><span style="color: rgb(199, 146, 234);" class="token punctuation">.</span><span class="token property-access">children</span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">      </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token plain">div</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    </span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token maybe-class-name">MDXProvider</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span></div></pre></div><p>The page content is available in <code>props.children</code>.</p><p>~~Remember <code>pageArgs</code> from before? You can use <code>pageArgs</code> to set a page wrapper programmatically.~~</p><p>~~In your <code>sourceData</code> function:~~</p><div is="code" codestring="// toast.js\nawait setDataForSlug(\&quot;/\&quot;, {\n  wrapper: {\n    mode: \&quot;source\&quot;,\n    value: `\nimport { h } from \&quot;preact\&quot;;\nexport default props =&gt; (\n  &lt;div style={{backgroundColor: 'hotpink';}}&gt;\n    {props.children}\n  &lt;/div&gt;\n)\n`,\n  },\n});" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(99, 119, 119); font-style: italic;" class="token comment">// toast.js</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(127, 219, 202);" class="token keyword control-flow">await</span><span class="token plain"> </span><span style="color: rgb(130, 170, 255);" class="token function">setDataForSlug</span><span style="color: rgb(199, 146, 234);" class="token punctuation">(</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;/&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  wrapper</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(199, 146, 234);" class="token punctuation">{</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    mode</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token string">&quot;source&quot;</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">    value</span><span style="color: rgb(127, 219, 202);" class="token operator">:</span><span class="token plain"> </span><span style="color: rgb(173, 219, 103);" class="token template-string template-punctuation string">`</span><span style="color: rgb(173, 219, 103);" class="token template-string string"></span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">import { h } from &quot;preact&quot;;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">export default props =&gt; (</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">  &lt;div style={{backgroundColor: 'hotpink';}}&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">    {props.children}</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">  &lt;/div&gt;</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string">)</span></div><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(173, 219, 103);" class="token template-string string"></span><span style="color: rgb(173, 219, 103);" class="token template-string template-punctuation string">`</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain">  </span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">,</span><span class="token plain"></span></div><div style="color: #d6deeb;" class="token-line"><span class="token plain"></span><span style="color: rgb(199, 146, 234);" class="token punctuation">}</span><span style="color: rgb(199, 146, 234);" class="token punctuation">)</span><span style="color: rgb(199, 146, 234);" class="token punctuation">;</span></div></pre></div><p>Programmatically setting the wrapper component is not implemented yet (using <code>toast@0.3.43</code>).</p><h3 id="static-assets" is="postHeading"><a href="#static-assets">Static assets</a></h3><p>The contents of <code>/static</code> will be copied into the root of the output directory (<code>/public</code>).</p><p>The file <code>/static/fonts/my-font-file.woff2</code> will be available at the URL <code>/fonts/my-font-file.woff2</code> in your built site.</p><h3 id="toast-sites" is="postHeading"><a href="#toast-sites">Toast sites</a></h3><ul><li><a href="https://alexstrand.dev/">alexstrand.dev</a> (<a href="https://github.com/ajstrand/personal-site">src</a>)</li><li><a href="https://www.christopherbiscardi.com/">christopherbiscardi.com</a> (<a href="https://github.com/ChristopherBiscardi/christopherbiscardi.github.com/tree/pure-mdx/packages/www">src</a>)</li><li><a href="https://www.jacobbolda.com/">jacobbolda.com</a> (<a href="https://github.com/jbolda/jacobbolda.com">src</a>)</li><li><a href="https://www.jason.af/">jason.af</a> (<a href="https://github.com/jlengstorf/jason.af">src</a>)</li><li><a href="https://lannonbr.com/">lannonbr.com</a> (<a href="https://github.com/lannonbr/Portfolio">src</a>)</li><li>learnwithjason/scenes(<a href="https://github.com/learnwithjason/scenes">src</a>)</li><li><a href="https://learnwithjason.dev">learnwithjason.dev</a>(<a href="https://github.com/learnwithjason/learnwithjason.dev">src</a>)</li><li>maxcell/prince-toast(<a href="https://github.com/maxcell/prince-toast">src</a>)</li><li><a href="https://github.com/talves/toast-template">talves/toast-template</a> (this is a template rather than a site)</li><li>this site :) (<a href="https://github.com/m-allanson/garden">src</a>)</li><li><a href="https://www.toast.dev/">toast.dev</a> (<a href="https://github.com/toastdotdev/www.toast.dev">src</a>)</li></ul></article></main><footer is="mainFooter"><a href="https://github.com/m-allanson/mikeallanson.com">Source available on GitHub</a></footer></div>
    <script type="module">
    /* @jsx jsx */

async function renderPage() {
  const promises = [
    import(window.componentPath),
    window.wrapperComponentPath
      ? import(window.wrapperComponentPath)
      : undefined,
    window.dataPath
      ? fetch(window.dataPath).then(response => {
          return response.json();
        })
      : {},
    import("/web_modules/preact.js")
  ];

  let pageWrapper = ({ children }) => h("div", null, children);
  const [
    PageModule,
    PageWrapperModule,
    pageData,
    { render, h }
  ] = await Promise.all(promises);
  const Page = PageModule.default;
  if(PageWrapperModule) {
    pageWrapper = PageWrapperModule.default
  }

  render(
    h(pageWrapper, pageData, h(Page, pageData)),
    document.getElementById("toast-page-section")
  );
}

renderPage();

</script>
  </body>
</html>
