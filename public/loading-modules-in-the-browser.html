<!DOCTYPE html>
<script>
window.componentPath = "/loading-modules-in-the-browser.js";
window.wrapperComponentPath = "/src/page-wrapper.js";
window.dataPath = "/loading-modules-in-the-browser.json";
</script>
<html lang="en">
  <head>
  <title data-react-helmet="true">Loading Modules in the Browser ðŸª² mikeallanson.com</title>
  <meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" name="description" content="TODO!! Here is my lovely placeholder description"/>
  <link data-react-helmet="true" type="font/woff2" href="fonts/ibm-plex-serif-v9-latin-700.woff2" rel="preload" as="font" crossorigin="anonymous"/><link data-react-helmet="true" rel="stylesheet" href="/styles.css"/><link data-react-helmet="true" rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸª²&lt;/text&gt;&lt;/svg&gt;"/><link data-react-helmet="true" rel="alternate icon" href="/favicon.ico"/>
  
  
  </head>
  <body >
    <div id="toast-page-section"><header role="banner"><a href="/" aria-label="Mike Allanson">Mike Allanson</a></header><main><article is="post" class="flow"><h1 id="loading-modules-in-the-browser" is="postHeading">Loading Modules in the Browser</h1><p>Use:</p><div is="code" codestring="&lt;script type=\&quot;module\&quot; src=\&quot;myFile.js\&quot;&gt;&lt;/script&gt;" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">script type</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;module&quot;</span><span class="token plain"> src</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;myFile.js&quot;</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token plain">script</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span></div></pre></div><p>The <code>defer</code> attribute is automatically implied. <code>defer</code> allows the browser to download and parse the script in parallel with HTML parsing. The script is executed after the document has been parsed, but before <code>DOMContentLoaded</code>.</p><p>Scripts will execute in the order they appear in the document.</p><h2 id="the-async-attribute" is="postHeading"><a href="#the-async-attribute">The <code>async</code> attribute</a></h2><p>Use the <code>async</code> attribute like this:</p><div is="code" codestring="&lt;script type=\&quot;module\&quot; src=\&quot;myFile.js\&quot; async&gt;&lt;/script&gt;" class="language-js"><pre style="color: #d6deeb; background-color: transparent;" class="prism-code language-js"><div style="color: #d6deeb;" class="token-line"><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span class="token plain">script type</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;module&quot;</span><span class="token plain"> src</span><span style="color: rgb(127, 219, 202);" class="token operator">=</span><span style="color: rgb(173, 219, 103);" class="token string">&quot;myFile.js&quot;</span><span class="token plain"> async</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span><span style="color: rgb(127, 219, 202);" class="token operator">&lt;</span><span style="color: rgb(127, 219, 202);" class="token operator">/</span><span class="token plain">script</span><span style="color: rgb(127, 219, 202);" class="token operator">&gt;</span></div></pre></div><p>The <code>async</code> attribute causes the script to execute as soon as it's been downloaded. Interrupting HTML parsing if necessary.</p><p>This disables 'in-order' execution of the script. It will execute as soon as possible.</p><h2 id="more-info" is="postHeading"><a href="#more-info">More info</a></h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">The <code>&lt;script&gt;</code> element on MDN</a></li><li><a href="https://gist.github.com/jakub-g/385ee6b41085303a53ad92c7c8afd7a6"><code>&lt;script&gt;</code> cheatsheet</a></li><li><a href="https://v8.dev/features/modules#module-vs-script">JavaScript modules on v8.dev</a></li></ul></article></main><footer is="mainFooter"><a href="https://github.com/m-allanson/mikeallanson.com">Source available on GitHub</a></footer></div>
    <script type="module">
    /* @jsx jsx */

async function renderPage() {
  const promises = [
    import(window.componentPath),
    window.wrapperComponentPath
      ? import(window.wrapperComponentPath)
      : undefined,
    window.dataPath
      ? fetch(window.dataPath).then(response => {
          return response.json();
        })
      : {},
    import("/web_modules/preact.js")
  ];

  let pageWrapper = ({ children }) => h("div", null, children);
  const [
    PageModule,
    PageWrapperModule,
    pageData,
    { render, h }
  ] = await Promise.all(promises);
  const Page = PageModule.default;
  if(PageWrapperModule) {
    pageWrapper = PageWrapperModule.default
  }

  render(
    h(pageWrapper, pageData, h(Page, pageData)),
    document.getElementById("toast-page-section")
  );
}

renderPage();

</script>
  </body>
</html>
